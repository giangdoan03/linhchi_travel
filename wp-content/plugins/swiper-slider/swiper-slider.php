<?php/** * Plugin Name: Swiper Slider Plugin * Plugin URI:  https://example.com * Description: A simple Swiper Slider plugin for WordPress * Version:     1.0 * Author:      Đoàn Giang * Author URI:  https://example.com * Text Domain: swiper-slider */if (!defined('ABSPATH')) {    exit; // Bảo vệ file tránh truy cập trực tiếp}// Thêm script khởi tạo Swiperfunction swiper_slider_enqueue_scripts() {    // Enqueue Swiper CSS và JS    wp_enqueue_style('swiper-slider-css', plugins_url('assets/swiper.min.css', __FILE__));    wp_enqueue_script('swiper-slider-js', plugins_url('assets/swiper.min.js', __FILE__), array('jquery'), null, true);    // Enqueue tệp JavaScript khởi tạo Swiper (swiper-init.js)    wp_enqueue_script('swiper-init-js', plugins_url('assets/swiper-init.js', __FILE__), array('swiper-slider-js'), null, true);}add_action('wp_enqueue_scripts', 'swiper_slider_enqueue_scripts');// Shortcode để hiển thị Swiper sliderfunction swiper_slider_shortcode($atts) {    ob_start();    include plugin_dir_path(__FILE__) . 'templates/swiper-template.php';    return ob_get_clean();}add_shortcode('swiper_slider', 'swiper_slider_shortcode');// Thêm trang cài đặt plugin vào menufunction swiper_slider_add_admin_menu() {    add_menu_page(        __('Swiper Slider Settings', 'swiper-slider'),        __('Slider Settings', 'swiper-slider'),        'manage_options',        'swiper_slider_settings',        'swiper_slider_settings_page',        'dashicons-images-alt2',        100    );}add_action('admin_menu', 'swiper_slider_add_admin_menu');// Hàm hiển thị nội dung trang cài đặtfunction swiper_slider_settings_page() {    ?>    <div class="wrap">        <h1><?php esc_html_e('Swiper Slider Settings', 'swiper-slider'); ?></h1>        <form method="post" action="options.php">            <?php            settings_fields('swiper_slider_settings_group');            do_settings_sections('swiper_slider_settings');            submit_button();            ?>        </form>    </div>    <?php}// Enqueue các script cho Media Uploaderfunction swiper_slider_admin_enqueue_scripts($hook) {    // Chỉ load các script trên trang cài đặt của plugin    if ($hook !== 'toplevel_page_swiper_slider_settings') {        return;    }    // Tải Media Uploader scripts    wp_enqueue_media();    // Tải jQuery nếu chưa có    wp_enqueue_script('jquery');    // Nếu cần bạn cũng có thể enqueue thêm các script khác của plugin}add_action('admin_enqueue_scripts', 'swiper_slider_admin_enqueue_scripts');// Đăng ký các thiết lập cho trang cài đặtfunction swiper_slider_register_settings() {    register_setting('swiper_slider_settings_group', 'swiper_slider_images'); // Đăng ký để lưu ảnh    add_settings_section(        'swiper_slider_main_settings',        __('Main Settings', 'swiper-slider'),        'swiper_slider_settings_section_callback',        'swiper_slider_settings'    );    add_settings_field(        'swiper_slider_images', // ID của trường        __('Slider Images', 'swiper-slider'), // Tiêu đề của trường        'swiper_slider_images_field_callback', // Hàm callback để hiển thị input        'swiper_slider_settings', // Trang hiển thị        'swiper_slider_main_settings' // Phần hiển thị    );}add_action('admin_init', 'swiper_slider_register_settings');// Hàm callback hiển thị phần cài đặtfunction swiper_slider_settings_section_callback() {    echo '<p>' . __('Configure the Swiper Slider settings below:', 'swiper-slider') . '</p>';}// Hàm callback để hiển thị trường chọn ảnhfunction swiper_slider_images_field_callback() {    $images = get_option('swiper_slider_images', []);    ?>    <div id="swiper_slider_images_wrapper">        <?php if (!empty($images)): ?>            <?php foreach ($images as $image): ?>                <div class="swiper-slider-image-item">                    <img src="<?php echo esc_url($image); ?>" style="max-width: 150px;"/>                    <input type="hidden" name="swiper_slider_images[]" value="<?php echo esc_url($image); ?>">                    <button type="button" class="button swiper-remove-image"><?php esc_html_e('Remove', 'swiper-slider'); ?></button>                </div>            <?php endforeach; ?>        <?php endif; ?>    </div>    <button type="button" class="button" id="swiper_add_image"><?php esc_html_e('Add Image', 'swiper-slider'); ?></button>    <script type="text/javascript">        jQuery(document).ready(function ($) {            // Thêm ảnh mới            $('#swiper_add_image').click(function (e) {                e.preventDefault();                var frame = wp.media({                    title: 'Select Image',                    button: {                        text: 'Add Image'                    },                    multiple: false // Cho phép chọn nhiều ảnh nếu cần                });                frame.on('select', function () {                    var attachment = frame.state().get('selection').first().toJSON();                    $('#swiper_slider_images_wrapper').append(                        '<div class="swiper-slider-image-item">' +                        '<img src="' + attachment.url + '" style="max-width: 150px;" />' +                        '<input type="hidden" name="swiper_slider_images[]" value="' + attachment.url + '">' +                        '<button type="button" class="button swiper-remove-image">Remove</button>' +                        '</div>'                    );                });                frame.open();            });            // Xóa ảnh            $(document).on('click', '.swiper-remove-image', function () {                $(this).closest('.swiper-slider-image-item').remove();            });        });    </script>    <?php}